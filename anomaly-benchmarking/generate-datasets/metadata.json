{
  "name": "Generate benchmarking datasets",
  "description": "This script takes a list of datasets and transforms them into a suite
of ground-truthed benchmark datasets for anomaly detection as laid out
in the ODD paper
http://www.outlier-analytics.org/odd13kdd/papers/emmott,das,dietterich,fern,wong.pdf. It depends on the library make-binary.

These output datasets vary along the dimensions point difficulty, relative
frequency of anomalies, and clusteredness.

For each dataset id in the list, this script: 

- Transforms the dataset into a binary classification using the
  library function `make-binary`.

- Seperates out the normal rows.

- Point difficulty: Models the dataset with a logistic regression, and
  uses a batchprediction to labels each row with the probability of it
  being labeled normal. The rows labeled anomalous are sorted into
  one of four datasets based on this probability. (easy (0, 0.1666),
  medium [0.1666, 0.3333), hard [0.3333, 0.5), very hard [0.5,
  1))

- Clusteredness: For each of the point difficulty datasets, an anomaly
  detector (isolation forest) and batchprediction are used to label
  each row with an anomaly score. This is a rough gauge for
  clusteredness, and new datasets are created from the top and bottom
  20% anomaly scores. The actual clusteredness is calculated by
",
  "kind": "script",
  "source_code": "script.whizzml",
  "imports": ["../make-binary"],
  "inputs": [
    {
      "name": "dataset-list",
      "type": "list",
      "description": "The resource ids of the 'mother' datasets"
    },
    {
      "name": "difficulty-map",
      "type": "map",
      "default": {"easy": 0.13333333, "medium": 0.33333333, "hard": 0.5, "very hard": 1},
      "description": "Categories for point difficulty"
    },
    {
      "name": "variance-map",
      "type": "map",
      "default":{"high scatter": 0.25, "medium scatter": 0.5, "low scatter": 1, "low clusteredness": 2, "medium clusteredness": 4, "high clusteredness": 1000000},
      "description": "Categories for semantic variance"
    },
    {
      "name": "frequency-list",
      "type": "list",
      "default": [0.001, 0.005, 0.01, 0.05, 0.1],
      "description": "Relative frequency levels"
    },
    {
      "name": "replicates",
      "type": "number",
      "default": 10,
      "description": "How many datasets to make at given categories/levels"
    },
    {
      "name": "delete-resources",
      "type": "boolean",
      "default": true,
      "description": "Whether to delete all intermediate resources"
    }
  ],
  "outputs": [
    {
      "name": "generated-datasets",
      "type": "list",
      "description": "generated children datasets"
    }
  ]
}
